<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Protected Quick Links page with dark mode, interactive features, link management, settings, and persistence" />
  <title>My Quick Links - Protected</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- LOGIN CONTAINER -->
  <div id="loginContainer">
    <h2>Please Enter Password</h2>
    <form onsubmit="submitLogin(event)">
      <input type="password" id="loginPassword" placeholder="Password" />
      <button type="submit">Login</button>
      <p id="loginError">Incorrect password. Try again!</p>
    </form>
  </div>

  <!-- PROTECTED CONTENT -->
  <div id="mainContent">
    <header>
      <!-- Dark Mode Toggle -->
      <div class="toggle-switch">
        <input type="checkbox" id="themeToggle" onclick="toggleTheme()" />
        <label for="themeToggle" aria-label="Toggle dark mode"></label>
      </div>
      
      <!-- Category Buttons & Manage/Clear Buttons -->
      <nav class="categories">
        <button onclick="clickCategory('all')">All Sites</button>
        <button onclick="clickCategory('hosted')">Hosted</button>
        <button onclick="clickCategory('nonhosted')">Non Hosted</button>
        <button class="manage-btn" onclick="clickManage()">Manage URLs</button>
        <button class="clear-btn" onclick="clearSearch()">Clear</button>
      </nav>
      
      <!-- Search Bar -->
      <input type="text" id="searchBox" placeholder="Search links..." />
      
      <!-- Default Reset Buttons -->
      <div class="default-reset-buttons">
        <button onclick="defaultResetAll()">Reset All Sites</button>
        <button onclick="defaultResetHosted()">Reset Hosted</button>
        <button onclick="defaultResetNonHosted()">Reset Non Hosted</button>
      </div>
      
      <!-- Settings & Logout Buttons -->
      <button class="settings-btn" onclick="toggleSettings()">Settings</button>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </header>
    
    <!-- LEFT-PINNED MANAGE PANEL (Portrait) -->
    <div id="managePanel">
      <h2>Manage URLs</h2>
      <form onsubmit="submitForm(event)">
        <label for="linkName">Link Name:</label>
        <input type="text" id="linkName" placeholder="Link Name" required />
        
        <label for="linkURL">Link URL:</label>
        <input type="url" id="linkURL" placeholder="Link URL" required />
        
        <label for="linkCategory">Category:</label>
        <select id="linkCategory" required>
          <option value="">Select Category</option>
          <option value="hosted">Hosted</option>
          <option value="nonhosted">Non Hosted</option>
        </select>
        
        <div style="display: flex; gap: 10px; margin-top: 10px;">
          <button id="submitBtn" type="submit">Add Link</button>
          <button type="button" onclick="cancelManage()">Cancel</button>
        </div>
      </form>
      <p>Edit or remove links using the buttons on each card below.</p>
    </div>
    
    <!-- SETTINGS PANEL (MODAL) WITH TABS -->
    <div id="settingsPanel">
      <h2>Settings</h2>
      <div class="settings-tabs">
        <div class="tab-buttons">
          <button data-target="tab-general" class="active" onclick="switchTab(event)">General</button>
          <button data-target="tab-appearance" onclick="switchTab(event)">Appearance</button>
          <button data-target="tab-advanced" onclick="switchTab(event)">Advanced</button>
        </div>
        
        <!-- General Tab -->
        <div id="tab-general" class="tab-content active">
          <h3>General Settings</h3>
          <div>
            <p>Default Category:</p>
            <label><input type="radio" name="defaultCategory" value="all"> All Sites</label>
            <label><input type="radio" name="defaultCategory" value="hosted"> Hosted</label>
            <label><input type="radio" name="defaultCategory" value="nonhosted"> Non Hosted</label>
          </div>
          <div>
            <label><input type="checkbox" id="enableAnimation" checked> Enable Card Animation</label>
          </div>
          <div>
            <label><input type="checkbox" id="alwaysShowEdit"> Always Show Edit/Remove Buttons</label>
          </div>
        </div>
        
        <!-- Appearance Tab -->
        <div id="tab-appearance" class="tab-content">
          <h3>Appearance Settings</h3>
          <div>
            <label>Primary Button Color: 
              <input type="color" id="primaryButtonColor" value="#6a90ab">
            </label>
          </div>
          <div>
            <label>Card Background Color: 
              <input type="color" id="cardBgColor" value="#ffffff">
            </label>
          </div>
          <div>
            <label>Card Hover Background Color: 
              <input type="color" id="cardHoverBgColor" value="#e6e6e6">
            </label>
          </div>
          <div>
            <label>Text Color: 
              <input type="color" id="textColor" value="#333333">
            </label>
          </div>
          <div>
            <label>Link Color: 
              <input type="color" id="linkColor" value="#007bff">
            </label>
          </div>
          <div>
            <label>Hover Scale Factor: 
              <input type="range" id="hoverScale" min="1" max="1.5" step="0.1" value="1.2">
              <span id="hoverScaleDisplay">1.2</span>
            </label>
          </div>
          <div>
            <p>Hover Scale Preview:</p>
            <div id="hoverPreview" style="border:1px solid var(--shadow-color); padding:10px; text-align:center;">Preview</div>
          </div>
          
          <!-- Additional new fields -->
          <div style="margin-top:1em;">
            <label>UI Scale:
              <input type="range" id="uiScale" min="1" max="2" step="0.1" value="1">
              <span id="uiScaleDisplay">1</span>
            </label>
          </div>
          <div style="margin-top:1em;">
            <label>Custom Background URL:
              <input type="text" id="bgUrl" placeholder="https://example.com/bg.jpg" style="width:100%;">
            </label>
          </div>
          <div style="margin-top:1em;">
            <label>Preset Theme:
              <select id="presetTheme">
                <option value="">None</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="matrix">Matrix</option>
                <option value="retro">Retro</option>
              </select>
            </label>
          </div>
          <div style="margin-top:1em;">
            <label>Animation Style:
              <select id="animationStyle">
                <option value="none">None</option>
                <option value="bounce">Bounce</option>
                <option value="fade">Fade</option>
                <option value="zoom">Zoom</option>
              </select>
            </label>
          </div>
        </div>
        
        <!-- Advanced Tab -->
        <div id="tab-advanced" class="tab-content">
          <h3>Advanced Settings</h3>
          <div>
            <label>Custom CSS:</label>
            <textarea id="customCSS" rows="5" placeholder="Enter custom CSS here..." style="width:100%;"></textarea>
          </div>
          <div>
            <button type="button" onclick="applyCustomCSS()">Apply Custom CSS</button>
          </div>
          <div style="margin-top:10px;">
            <button type="button" onclick="resetSettings()">Reset Settings</button>
          </div>
        </div>
      </div>
      <div style="margin-top:10px; text-align:right;">
        <button type="submit" onclick="saveSettings(event)">Save Settings</button>
        <button type="button" onclick="hideSettings()">Cancel</button>
      </div>
    </div>
    
    <!-- LINKS LIST -->
    <div id="linksList"></div>
    
    <!-- BACK TO TOP BUTTON -->
    <button id="topBtn" aria-label="Back to top" onclick="topFunction()">â†‘</button>
  </div>

  <!-- Load scripts in this order so loadSettings is defined before main.js calls it -->
  <script src="data/sites.js"></script>
  <script src="js/settings.js"></script>
  <script src="js/main.js"></script>
</body>
</html>
